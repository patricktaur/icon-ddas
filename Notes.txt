30Dec2016
Patrick:
DDAS.Models.Entities.Domain.SiteData.AdequateAssuranceListSiteData: Element 'Links' does not match any field or property of class DDAS.Models.Entities.Domain.SiteData.AdequateAssuranceList.

Refactoring MatchedRecords:
 public ComplianceForm ScanUpdateComplianceForm(ComplianceForm frm, ILog log)
	AddMatchingRecords(frm, log);
		 var MatchedRecords = GetMatchedRecords(siteSource, InvestigatorName, log,
                                ComponentsInInvestigatorName); returns IList of MatchedRecord



27Nov2016:
Patrick's code:
SearchController
SearchResult

New Controller:

ComplianceFormController


Analysing calls:
Client: getSingleNameUpdatedNamesFromOpenComplianceForm /  search/GetComplianceForm/?NameToSearch=
Server: GetComplianceForm / GetSearchSummaryDetailsForSingleName / _SearchSummary.GetSearchSummary
_SearchSummary.GetSearchSummary:
	GetSearchSummary
		foreach(InvestigatorSearched Investigator in form.InvestigatorDetails) -- GetInvestigatorSearchedDetails -- CreateComplianceForm (or Update)
			GetInvestigatorSearchedDetails
				 ScanData.GetSiteScanSummary
					Add Sites to search (DB + Live) (List of sites )
					foreach (SearchQuerySite Site in Sites)
						GetSiteScanData
						...
						GetFDADebarPageMatchCount - matched records are added to site.

Priority:
5Nov 2016
1. Live Search - 1 site - completed.
2. Excel Upload - Patrick 
3. DBRecords - Logic based on last record - pull only the last records - Pradeep
4. Input page - remove study nu drop down Patrick
5. Pop up page for editing observations - Patrick
6. Links inside record Details - Pradeep
7. Login Page
  a. Password incorrect - message does not appear, app get stuck
  b. Field validations
  c. disable submit button when not vaidated.
  c. Logout
8. Detail page
	a. sort record desc on matched
	b. last saved on




	
	
2. Authentication, Accounts controller
3. New UI
4. Tests

12Sep2016
Parick
1. Mapping base class in Mongo
2. Angular
	Display Error Messages
	Details Module under Search
3. Move html from FDAPage to .html
4. Routing - Page not found

2. Generating PDF with Angular ?
3. Search Page enhancements

5. Routing erros
6. Angular - moving to production site
7. Authentication


Pradeep
17Nov2016
1. Live Site: Record Scan Request time (datetime), Scan Start time, get last time of scan and if less than 30 seconds, delay start of scan.  
2. Store Source Date on for Live Site - for each Live Scan
3. Log Live Site Scan failure in ComplianceForm - Site
4. Store Scan Mode: Live-Scan / Database
15Nov2016
Extractor - log number of records extracted.
Log: n sites successful, n sites failed.
7Nov2016
SiteScanData line 143: null item must be handled.



2. LIST OF SPECIALLY DESIGNATED NATIONALS - Download PDF
	a. read document date
	b. store content  
	c. Index content

5. SiteLastUpdatedOn - logic while reading site data

22Oct2016
1.Extractor:
Folder: Development/Temp - ??  move foder path to web.config, create foder if not available.

2. API
	Accounts Controller - move all user code from SearchController

Divya - Web Site
======================
1. Angular Accordion
2. Login Page
3. Reports
4. Previous Searches - view

5. Use Enum values: this.siteData.SiteEnum = SiteEnum.ClinicalInvestigatorInspectionPage;

-----------------------------------------------------------------------------------------------------------
Entry on 13 Sep 2016
1. Issues while installing Chrome driver -> Exception 'ChromeDriverServiceNotFound' was thrown for the line
 -- Driver = new ChromeDriver();
 Solution: Need to provide the filepath where the chromedriver.exe is saved as an argument   
 Driver = new ChromeDriver(@"filepath where the chromedriver.exe is saved")
<<<<<<< HEAD
>>>>>>> 32ad08b6c513bf0c281c27e8809f6dcad8fcb8f9


Setting up Chrome Driver:
Download:
https://sites.google.com/a/chromium.org/chromedriver/downloads
Windows 32 version
to : C:\Development\p926-ddas\Libraries\ChromeDriver
=======

-----------------------------------------------------------------------------------------------------------
 Entry on 14 Sep 2016
 1. Able to test all sites using PhantomJS webdriver. Following was the issue while testing the page
 'Exclusions Database Search - http://exclusions.oig.hhs.gov'

 Error: 
 'InvalidOperationException' - along with this error, the driver url, title and page source 
 were also empty! which shouldn't be.

 Solution: 
 Setting up SslProtocol property of the PhantomJSDriverService to "any" solved the problem.
 
 PhantomJSDriverService service = PhantomJSDriverService.CreateDefaultService();
 service.SslProtocol = "any";
 _Driver =  new PhantomJSDriver(service);

-----------------------------------------------------------------------------------------------------------
Entry on 15 Sep 2016
1. Completed coding and testing for -
   FDA Warning Letters and Responses and
   PHS Administrative Actions Listing

   FDA Warning Letters and Responses - Currently unable to test this site using PhantomJS.
   Exception: StaleElementReferenceException is thrown after clicking on 'search' button, trying to access
   the table that contains the data.
   
   Solution: Yet to find a solution

-----------------------------------------------------------------------------------------------------------
Entry on 16 Sep 2016
1. Completed coding and testing for -
   Corporate Integrity Agreements

   SAM - System for Award Management: Is in progress.
   Commiting the code to GitHub. 

-----------------------------------------------------------------------------------------------------------
Entry on 19 Sep 2016
1. Still working on SAM site, able to get the XPath in place to get required details.
2. As discussed with johnly and patrick, need to find a way to download all the search results into CSV
   from the SAM site.
3. As per the updated version (pulled from Git), Error handling has been included in the project by patrick.
4. Three sites are not working as expected. Clinical Investigator Inspection, FDA Warning letters and
   Exclusion database search sites. Need to find the cause of these errors. 

-----------------------------------------------------------------------------------------------------------
Entry on 20 Sep 2016
1. Error in the sites: FDA Warning letters and Exclusion Database search was, element not found which has 
   been resolved.
2. Could not find the error for the site: Clinical Ivestigator Inspection page.
3. Able to loop through all the records for the site: System for Award Management
4. New fields were found while searching with the name: Hari in SAM site. Namely -
   Classification and activation date
   Property: DoDAAC was not found.

-----------------------------------------------------------------------------------------------------------
Entry on 21 Sep 2016
1. Able to extract the new fields from SAM site. Output is as expected.

-----------------------------------------------------------------------------------------------------------
Entry on 22 Sep 2016
1. Going through AngluarJS 2 documentation to understand component.ts, module.ts, main.ts and index.html

-----------------------------------------------------------------------------------------------------------
Entry on 23 Sep 2016
1. Going through MongoDB documentation to understand CRUD operations. 
2. Trying to add data into MongoDB.
3. Need to have the API connected to mongoDB to save downloaded records.

-----------------------------------------------------------------------------------------------------------
Entry on 26 Sep 2016
1. Interfaces and classes of UnitOfWork and Repository for FDADebarpage are created by patrick.
2. Understanding the flow, how the MongoDB is connected with the models and pages.
3. Able to save data into mongoDB with using UnitOfWork and Repositories for ERRProposalToDebar page.

-----------------------------------------------------------------------------------------------------------
Entry on 27 Sep 2016
1. Able to save/add data for FDADebarPage and PHSAdministrativeActionListingPage into mongoDB.
2. Removed the Search method from the BaseSearchPage of return type ResultAtSite which is no longer valid
   as searching the names will be a seperate component. Currently the selenium component will only
   extract the data from the sites and save into mongoDB.
3. Required Changes made in the SearchEngine, ISearchEngine and ISearchPage to exclued the search
   method.
4. Added a new project, DDAS.Services, which will be containing the logic to search matching records
   from all sites and return the matching percentage along with the records.

-----------------------------------------------------------------------------------------------------------
Entry on 28 Sep 2016
1. In the DDAS.Services, as discussed with patrick, added GetSearchSummary method to retrieve records from
   mongoDB and calculate the percentage/count of match for NameToSearch.
2. Unable to pull data from mongoDB, Error: Cannot create instance of an interface. 
   Need to understand the GetAll() function of mongoDB to pull the data.

-----------------------------------------------------------------------------------------------------------
Entry on 29 Sep 2016
1. The Norm driver was used to perform CRUD operations with MongoDB. The Add function in the repository was
   working but the GetAll function wasn't working. It was found that Norm driver was causing the problem.
2. Replaced the Norm driver with MongoDB driver and related queries or functions to add and read data from
   Mongo database. Able to add collections and read the same.

-----------------------------------------------------------------------------------------------------------
Entry on 30 Sep 2016
1. Able to read records from MongoDB and calculate the MatchSummary for the given Name to search.
2. For every collection added to the database for the same page/site, RecId is added as 0 and is not being
   incremented. Need to fix this.

-----------------------------------------------------------------------------------------------------------
Entry on 1 Oct 2016
1. Able to read documents using ObjectId. Using Guid as ObjectID for mongoDB.
2. Able to provide search summary MatchStatus as output using postman.

-----------------------------------------------------------------------------------------------------------
Entry on 3 Oct 2016
1. One API call will be made to return the MatchStatus of all sites.
2. Currently, the API is returning match status for FDADebarPage.
3. Function to return the records matched has been updated and tested in a console application.
4. Need to genaralize functions in Search class and SiteScan class rather than having multiple functions
   for each page/site.
5. Identity to be integrated from Lakshmikanth into this project tomorrow.

-----------------------------------------------------------------------------------------------------------
Entry on 4 Oct 2016
1. API is now returning the fields or properties of FDADebarPage which match the NameToSearch.

-----------------------------------------------------------------------------------------------------------
Entry on 5 Oct 2016
1. ClinicalInvestigatorInspectionPage has been included into the serives, to return match status and the
   fields/properties that match the NameToSearch.
2. Observation: This site (CII) is providing only 200 records max. when follwed the method
   Advanced Search --> Select First Name drop down value "not equal to" --> enter the first name "zzzzz".
   Site gives 200 records when searched for the name "James" without using advanced search.
   Need to cross check this with clients.
3. Need to explore SAM site to find a way to download all records. 'Document Access' tab has some
   files which need to be investigated/looked into.

-----------------------------------------------------------------------------------------------------------
Entry on 6 Oct 2016
1. ClinicalInvestigatorInspectionPage: There's a downloadable zip file at 
   http://www.fda.gov/Drugs/InformationOnDrugs/ucm135198.htm which has 19 thousand records and date when 
   the records were updated.
2. Able to download, extract the details from the text file and save into Mongo collection.

-----------------------------------------------------------------------------------------------------------
Entry on 7 Oct 2016
1. Able to read data from API for ClinicalInvestigatorInspectionPage, Save the approved/rejected records.
  
-----------------------------------------------------------------------------------------------------------
Entry on 11 Oct 2016
1. Trying to find downloadable files for sites that have a Search Text box. 
2. Database exclusions list has a downloadable file which has about 60k+ records. Need to check with clients
   whether this data will be same to that of online search available.
3. Working on extracting this data from exlcusions site.

-----------------------------------------------------------------------------------------------------------
Entry on 12 Oct 2016
1. Including PHSAdministrativeAction Site into the services. Able to store and retrieve data.
   
-----------------------------------------------------------------------------------------------------------
Entry on 13 Oct 2016
1. Trying to find ways of downloading data for all sites.
2. SAM Site has public extracts, under which there are extracts available in CSV format.
3. These extracts have about 1.4L records. Need to check with clients whether this information can be used
   instead of online search.

-----------------------------------------------------------------------------------------------------------
Entry on 14 Oct 2016   
1. All the sites have been checked for downloadable data. Information has been collected into a speardsheet.
   Details will be discussed with clients on 17th.

-----------------------------------------------------------------------------------------------------------
Entry on 17 Oct 2016
1. As per the discussion with clients - CIIL, FDAWarningLetters, Disqualified proceedings, database 
   exclusion list and SAM site will be live search sites. Others will be scanned every 24 hours.

-----------------------------------------------------------------------------------------------------------
Entry on 18 Oct 2016
1. FDAWarningLetters and DisqualificationProceedings have 500 and 225 records respectively. But when
   when searched for a specific name, they show same number of records which should not be the case.
   hence live search to be carried out for these two.
2. CIIL has downloadable database but the date when database is updated is older(available on the download page)
   to that of database updated date available on the CIIL page. Currently using downloadable file and storing
   data into mongo.

-----------------------------------------------------------------------------------------------------------
Entry on 19 Oct 2016 
1. Included the ProposalToDebar page to save and retrieve data.

-----------------------------------------------------------------------------------------------------------
Entry on 20 Oct 2016
1. Included the PHSAdministrativeActionListing page to save and retrieve data.

-----------------------------------------------------------------------------------------------------------
Entry on 21 Oct 2016
1. Able to save the rejected/approved records for FDAWarningLetters, ProposalToDebar and PHS sites.

-----------------------------------------------------------------------------------------------------------
Entry on 24 Oct 2016
1. Working on FDAWarningLetters, which is a live site, to extract data and save into mongo.
2. Needed to call the load function from the API rather than the extractor which is the case for all
   the database/scannned sites.

-----------------------------------------------------------------------------------------------------------
Entry on 25 Oct 2016
1. Live Site Search is completed for three site - FDAWarningLetters, DisqualificationProceedings and
   SAM site.
2. Need to have proper error handling machanism.

-----------------------------------------------------------------------------------------------------------
Entry on 26 Oct 2016
1. Re-designing the database structure so that the pattern is same for live and non-live sites.
2. For the non-live sites, the data will be scanned/downloaded and saved into mongoDB. When searched for a 
   name, the records matching the NameToSearch will be saved into another collection and fetched.
3. For the live sites, data will directly be downloaded for matching records and saved into database.

-----------------------------------------------------------------------------------------------------------
Entry on 27 Oct 2016
1. Discussion on Re-structuring the database design. Method 2 is to save matched records from the live sites
   in the same structure to that of non live sites. 
2. Going with the Method 1, to save matched records of non live sites into different collection.

-----------------------------------------------------------------------------------------------------------
Entry on 28 Oct 2016 
1. Creating repository, interfaces and classes for FDADebarPage to return the matching records.
2. Database is structured such that, Compliance form details will be provided from the front end.
   For each name, a compliance form is to be generated.
3. Need to use OpenXml to create word document (compliance form) on the server for each Search name.
  
-----------------------------------------------------------------------------------------------------------
Entry on 2 Nov 2016
1. Able to Create the Compliance From structure

-----------------------------------------------------------------------------------------------------------
Entry on 3 Nov 2016
1. Able to put the new design in place which is to save the matching records for a name into a collection
   and retrieve the same for two sites - FDADebar and ClinicalInvestigatorInspectionList

-----------------------------------------------------------------------------------------------------------
Entry on 4 Nov 2016
1. Able to get the details of the matching records, save the status of the records and retrieve the same
   for FDADebarSite

-----------------------------------------------------------------------------------------------------------
Entry on 7 Nov 2016
1. Working on ClinicalInvestigator and FDAWarningLetter Site(live site), for the new design

-----------------------------------------------------------------------------------------------------------
Entry on 8 Nov 2016
1. 9 sites have been added (8 are database sites and 1 live site), Not tested yet
2. New design will provide the list of sites with total match count (full and partial)
3. Next level will provide the match status of each site.Then the matched details and saving the updated 
   records

-----------------------------------------------------------------------------------------------------------
Entry on 9 Nov 2016
1. Changed the Upload function in controller to return a dummy ComplianceForm object

-----------------------------------------------------------------------------------------------------------
Entry on 10 Nov 2016
1. Able to create compliance form when a file is uploaded to server

-----------------------------------------------------------------------------------------------------------
Entry on 11 Nov 2016
1. Able to test 8 sites in the local machine. Extractor was run on the server.

-----------------------------------------------------------------------------------------------------------
Entry on 12 Nov 2016
1. Log File error was solved but the full and partial match count was incorrect when tested over the server.
   Unable to figure out the problem with incorrect match counts
2. few of the sites are throwing 'WebDriverTimeOut Exception' while extracting the data. Need to have a
   mechanism of handling this exception and tyring to extract the data from the sites which throw this 
   exception

-----------------------------------------------------------------------------------------------------------
Entry on 14 Nov 2016
1. Issue with Match counts has been resolved. Able to get match counts per sites and per each NameToSearch

-----------------------------------------------------------------------------------------------------------
Entry on 15 Nov 2016
1. Able to delete/activate/close compliance forms

-----------------------------------------------------------------------------------------------------------
Entry on 16 Nov 2016
1. Testing 9 sites (8 database and 1 live site). Observations were not being saved. Updated the API to
   save the observations.

-----------------------------------------------------------------------------------------------------------
Entry on 17 Nov 2016
1. Adding all sites to check the performance. Webdriver time out exception has been handled temporarily.
   Need to have a permanent solution for this exception.
2. Need to notify the user about the sites that have failed, and provide an option to extract data for those
   sites.
   
-----------------------------------------------------------------------------------------------------------
Entry on 18 Nov 2016
1. Able to test all sites except SAM, with multiple names uploaded. Search results are as expected but 
   need to build logic to match the initials as well.

-----------------------------------------------------------------------------------------------------------
Entry on 19 Nov 2016
1. Changing the logic to match the initials as well but names not related to the search names are being
   matched. Need to discuss on initials with clients

-----------------------------------------------------------------------------------------------------------
Entry on 21 Nov 2016
1. Able to generate and download the compliance form in word document by adding findings and issues
2. Demo on DDAS tool functionality to upload a set of search names and get the results, review and add
   observations.
3. As per the demo, need to create compliance forms which will have a single PI and multiple SI's
4. Need to exclude matches that are repeated in cases of live search, when a single component is entered
   and is searched. (same name will be captured for two or more components)

-----------------------------------------------------------------------------------------------------------
Entry on 22 Nov 2016
1. Able to extract the data from the site which fails the live search. User will be provided with a button
   to reload the site or sites which fail to load due to WebDriveTimeOutException or any other exception
   caused during the search

-----------------------------------------------------------------------------------------------------------
Entry on 23 Nov 2016
1. Working on generating compliance form

-----------------------------------------------------------------------------------------------------------
Entry on 24 Nov 2016
1. Discussion on changing the design to add multiple SI's under a single PI. Changing the code accordingly 

-----------------------------------------------------------------------------------------------------------
Entry on 25 Nov 2016
1. Working on changing the design for saving PI's and SI's. All compilation errors have been fixed

-----------------------------------------------------------------------------------------------------------
Entry on 29 Nov 2016
1. ComplianceForm design has been changed. ComplianceForm will have a collection of SiteSource and Findings.
2. InvestigatorSearched will have a collection of SiteSearchStatus

-----------------------------------------------------------------------------------------------------------
Entry on 30 Nov 2016
1. Unable to get the new design to work. Working on reading excel file and finding matched records for each
   investigator. Using spreadsheetlight to read excel data

-----------------------------------------------------------------------------------------------------------
Entry on 1 Dec 2016
1. Able to read excel data from the input file. Understanding the new design

-----------------------------------------------------------------------------------------------------------
Entry on 2 Dec 2016
1. Understanding and working with new design

-----------------------------------------------------------------------------------------------------------
Entry on 5 Dec 2016
1. working on new design. Need to remove the old code

-----------------------------------------------------------------------------------------------------------
Entry on 6 Dec 2016
1. working on new design 

-----------------------------------------------------------------------------------------------------------
Entry on 7 Dec 2016
1. working on new design 

-----------------------------------------------------------------------------------------------------------
Entry on 8 Dec 2016
1. working on new design 

-----------------------------------------------------------------------------------------------------------
Entry on 9 Dec 2016
1. working on new design

-----------------------------------------------------------------------------------------------------------
Entry on 12 Dec 2016
1. Able to merge records which have same IdNumber and InspectionDate. Merging the DeficiencyCode for these
   records into one for the site: ClinicalInvestigatorInspectionList

-----------------------------------------------------------------------------------------------------------
Entry on 13 Dec 2016
1. Added the code to check the Page/Site/Database last updated date and extract the data accordingly. Only
   if required for sites - FDADebar, CIIL and ERRProposalToDebar

-----------------------------------------------------------------------------------------------------------
Entry on 14 Dec 2016
1. Added a base class to all SiteData classes which will have common properties
2. Working on reading PageLastUpdated from each site

-----------------------------------------------------------------------------------------------------------
Entry on 15 Dec 2016
1. SearchEngine is updated to provide SiteLastUpdatedDateFromDatabase. No conditions will be added to check
   the date in each site/page. ExtractionRequired check will be done outside the selenium (site)  

-----------------------------------------------------------------------------------------------------------
Entry on 16 Dec 2016
1. Able to read and validate the Site last updated date from page and database. Extracting the data if 
   required. Live sites yet to be done

-----------------------------------------------------------------------------------------------------------
Entry on 17 Dec 2016
1. Search engine is updated - functions related to reading SiteLastUpdatedDate from database

-----------------------------------------------------------------------------------------------------------
Entry on 19 Dec 2016
1. Removing unused code from the SearchService. Updating code for live sites as per the changes done in 
   ISearchEngine interface towards the Load function.

-----------------------------------------------------------------------------------------------------------
Entry on 20 Dec 2016
1. Updated SearchEngine to write log when the data extraction is not required
2. Downloads folder for the extractor is App_Data

-----------------------------------------------------------------------------------------------------------
Entry on 21 Dec 2016
1. Added ExtractData in Services under Search folder. Extractor/API will use ExtractData function to extract
   data from selenium for single or all the sites

-----------------------------------------------------------------------------------------------------------
Entry on 22 Dec 2016
1. Removed SearchService and SiteSummary classes completely from services. SearchService functions are
   added into ComplianceFormService class

-----------------------------------------------------------------------------------------------------------
Entry on 23 Dec 2016
1. Removed country from the Compliance form word template as requested by clients

-----------------------------------------------------------------------------------------------------------
Entry on 26 Dec 2016
1. Demo was given to clients to show the all functionalities in the applications. few changes were requested
   by the clients. Need to re-assign a compliance form to any other user. Adding extra table for additional 
   sites.

-----------------------------------------------------------------------------------------------------------
Entry on 27 Dec 2016
1. Changed the filepaths - Downloads, uploads and templates
