<div class="row">
	<div class="col-lg-12">

		<div class="well">

			<div class="alert alert-info" *ngIf="loading">
				<strong>Loading ...</strong>
			</div>

			<div class="row">
				<div class="col-lg-12">
					<h3 class="align-left no-margin-top">
						Findings for Institute: {{CompForm.Institute}}
					</h3>
				</div>
			</div>
			<div class="row">

				<div class="col-lg-12">
					<h3 class="align-left no-margin-top">

						<div class="text-left" *ngIf="SiteHasUrl == true">
							<a target="_blank" [href]="sanitize(Site.SiteUrl)">
								Source: {{Site.DisplayPosition + "." + Site.SiteName}}
							</a>
						</div>
						<div class="text-left" *ngIf="SiteHasUrl == false">
							Source: {{Site.DisplayPosition + "." + Site.SiteName}}
						</div>

					</h3>
				</div>
			</div>

		</div>

	</div>


	<div class="row">
		<div *ngFor="let matchedRecord of Findings; let indexVal = index">
			<form role='form'>
				<div class="form-group col-md-6">
					<div class="well">

						<br/>

						<div class="row" *ngIf="matchedRecord.IsMatchedRecord==true">
							<div class="col-md-12">
								<div class="row">
									<h4>Record Details</h4>
									<div *ngFor="let SplitItem of Split(matchedRecord.RecordDetails)" align="left">
										{{SplitItem}}
									</div>
								</div>
								<div class="row">
									<div *ngIf="matchedRecord.Links.length > 0">
										<h4>Document Links:</h4>
										<div *ngFor="let link of matchedRecord.Links" align="left">
											<a target="_blank" [href]="link.url">
											{{link.Title}}
                        				</a>
										</div>
									</div>

								</div>
								<div class="row">
									<div class="col-md-12">
										<hr>
									</div>
								</div>
							</div>
						</div>

						<div class="row">
							<div class="col-md-12">
								<h4>Findings:</h4>
								<textarea class="form-control" name="Observation" [(ngModel)]="matchedRecord.Observation" rows="3" cols="30" required placeholder="Observations"></textarea>
							</div>
						</div>

						<div class="row">
							<div class="col-md-6">
								<h4>Date of Inspection:</h4>

								<div *ngIf="!matchedRecord.IsMatchedRecord">
									<div date-picker [(DateValue)]="matchedRecord.DateOfInspection"></div>
								</div>
								<div *ngIf="matchedRecord.IsMatchedRecord">
									<label>{{matchedRecord.DateOfInspection | date: 'dd MMM yyyy'}}</label>
								</div>
							</div>
							<div class="col-md-6">
							</div>
						</div>

						<div class="row">
							<div class="col-md-12">
								<!--<label for="IsAnIssue"><h4>Is an Issue:</h4></label>
								<input type="checkbox" name="IsAnIssue" [(ngModel)]="matchedRecord.IsAnIssue" />-->
							</div>
						</div>
						<br/>
						<div class="row">
							<div class="col-md-12">
								<button type="button" class="btn btn-default" (click)="SetFindingToRemove(matchedRecord); RemoveConfirmModal.open()">Remove</button>
							</div>
						</div>
					</div>

				</div>
				<div *ngIf="dividerGeneration(indexVal)">
					<div style="clear:both;"></div>
				</div>
			</form>
		</div>
	</div>

	<p align="center">

		<button type="button" class="btn btn-primary" (click)="Add()">Add A Finding</button>

	</p>

	<p align="center">
		<!--<label>Review completed: <input type="checkbox"  name="ReviewCompleted" [(ngModel)]="SiteSearchStatus.ReviewCompleted" ></label>-->
		<button type="button" class="btn btn-primary" (click)="goBack()">Back</button>
		<!--<button type="button" class="btn btn-primary" (click)="Save()">Save</button>-->
		<button type="button" class="btn btn-primary" (click)="SaveAndClose()">Save</button>
		<!--<button type="button" class="btn btn-primary" (click)="TestSaveAndClose()">Test Save and Close</button>-->
	</p>
</div>


	<modal #IgnoreChangesConfirmModal>
		<modal-header>
			<h4 class="modal-title">Changes not saved.</h4>
		</modal-header>
		<modal-body>
			<p class="help-block">Changes </p>
		</modal-body>
		<modal-footer>
			<button type="button" class="btn btn-default" (click)="setDeactivateValue(); IgnoreChangesConfirmModal.close()">Ignore Changes</button>
			<button type="button" class="btn btn-default" (click)=" IgnoreChangesConfirmModal.close()">Cancel</button>
		</modal-footer>
	</modal>

	<modal #RemoveConfirmModal>
		<modal-header>
			<h4 class="modal-title">Confirm Removal</h4>
		</modal-header>
		<modal-body>
			Remove Finding ?.<br> {{RecordToDeleteText}}
		</modal-body>
		<modal-footer>
			<button type="button" class="btn btn-default" (click)="RemoveFinding(); RemoveConfirmModal.close()">Remove</button>
			<button type="button" class="btn btn-default" (click)=" RemoveConfirmModal.close()">Cancel</button>
		</modal-footer>
	</modal>