<div class="row">
	<div class="col-lg-12">
		<div class="well">
			<h3 class="no-margin-top">Closed Reviews</h3>
		</div>
	</div>
</div>





<div class="table-responsive">
	<div statusCircle-Legend-Horizontal></div>
	<table class="table table-bordered table-hover table-striped">
		<thead>

			<tr>
				<th class="col-md-3 text-left">Principal Investigator </th>
				<th class="col-md-2 text-left">ICON Project Number</th>
				<th class="text-left">Sponsor Protocol Number</th>
				<th class="text-left">Country</th>
				<th class="text-center">Searched on</th>
				<th class="text-left">Status</th>
				<th class="text-center">Actions</th>
			</tr>
		</thead>

		<tbody>
			<tr *ngFor="let item of filteredRecords | paginate: { itemsPerPage: 10, currentPage: pageNumber}; let idx=index" class="active">

				<td class="text-left">
					<!--{{item.Name}}
					<span toggle-show *ngIf="item.SubInvestigators.length > 0"> 
							<ul class="list-unstyled " style="white-space: nowrap">
							<li *ngFor="let inv of item.SubInvestigators" >{{inv.Name}}</li>
						</ul>
					</span>-->
					<h5> <a href="#collapseListGroup{{idx}}" role="button" data-toggle="collapse" aria-expanded="false" aria-controls="collapseListGroup1"> {{item.Name}} 
						<span class="glyphicon glyphicon-plus plus-glyphicon" *ngIf="item.SubInvestigators.length > 0" aria-hidden="true"></span>
						</a>
					</h5>

					<div class="panel-group" role="tablist" style="border:0">
						<div class="panel panel-default" style="border:0">
							<div class="panel-collapse collapse" role="tabpanel" id="collapseListGroup{{idx}}" aria-labelledby="collapseListGroupHeading1"
								aria-expanded="false" style="border:0">
								<ul class="list-group" style="border:0">
									<li style="border:0" class="list-group-item" *ngFor="let inv of item.SubInvestigators">{{inv.Name}}</li>
								</ul>
							</div>
						</div>
					</div>
				</td>
				<td class="text-center">
					{{item.ProjectNumber}}
				</td>
				<td>
					{{item.SponsorProtocolNumber}}
				</td>
				<td class="text-left">
					{{item.Country}}

				</td>
				<td class="text-left">
					{{item.SearchStartedOn | date: 'dd MMM yyyy'}}

				</td>
				<td align="center">
					<div statusCircle [status]="item.StatusEnum" size=24 [title]="item.Status"></div>
				</td>
				<td>
					<div class="btn-group">
						<button type="button" class="btn btn-sm btn-primary" (click)="DownloadComplianceFormModal.generate(item.RecId,  'Principal Investigator: ' + item.Name)"
							title="Download Compliance Form"><span class="glyphicon glyphicon-download-alt" ></span></button>
						<button type="button" class="btn btn-sm btn-primary" (click)="OpenForEdit(item)" title="Opens"><span class="glyphicon glyphicon-folder-open" ></span></button>
						<!--<button type="button" class="btn btn-primary" (click)="setCompFormActiveValue(item); ConfirmOpenForEditModal.open()" title="Open Compliance Form"><span class="glyphicon glyphicon-edit" ></span></button>-->
					</div>
				</td>
			</tr>
		</tbody>
	</table>
	<pagination-controls></pagination-controls>
</div>



<div #DownloadComplianceFormModal download-compliance-form></div>

<div #GenerateOutputFileModal generate-output-file></div>

<modal #ConfirmOpenForEditModal>
	<modal-header [show-close]="true">
		<h4 class="modal-title">Open ICF for Edit: {{makeActivePrincipalInvestigatorName}}</h4>
	</modal-header>
	<modal-body>
		<p>Make the Compliance Form Editable.</p>
		<p>The Form will be listed in the Due Diligence Check page</p>
		<p></p>

	</modal-body>
	<modal-footer>
		<button type="button" class="btn btn-default" (click)="makeCompFormActiveValue(); ConfirmOpenForEditModal.close()">Confirm</button>
		<button type="button" class="btn btn-default" (click)=" ConfirmOpenForEditModal.close()">Cancel</button>
	</modal-footer>
</modal>